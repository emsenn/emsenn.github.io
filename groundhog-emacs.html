<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2020-12-21 Mon 21:17 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Groundhog Emacs</title>
<meta name="generator" content="Org mode">
<meta name="author" content="emsenn">
</head>
<body>
<div id="preamble" class="status">
<section class="nav"><a href="file:///home/emsenn/org/p/personal/index.html">homepage</a> <a href="file:///home/emsenn/org/p/personal/records.html">record index</a> <a href="file:///home/emsenn/org/p/personal/d/index.html">daily records</a></section>
</div>
<div id="content">
<header>
<h1 class="title">Groundhog Emacs</h1>
</header><div class="head" id="org7f71a63">

</div>
<blockquote id="org6225b1e">
<p>
<b><i>Groundhog Emacs</i></b> is a <a href="20201215154153-tool.html">tool</a> for <a href="20201218102824-groundhog_person.html">Groundhog people</a> doing <a href="20201216101922-information_management.html">information management</a> using a <a href="20201217094215-computer.html">computer</a>.
</p>
</blockquote>

<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb1dbe3c">Introduction</a></li>
<li><a href="#org4c53b46">Groundhog Emacs</a>
<ul>
<li><a href="#org788eed5">Known Bugs</a></li>
<li><a href="#org3fef1b4">Components</a></li>
</ul>
</li>
<li><a href="#org6b1b90d">Supplements</a>
<ul>
<li><a href="#org178bb37">Table of Contents</a></li>
<li><a href="#org6eec4ae">Decisions</a></li>
<li><a href="#orgaf2ea95">Elisp Code Blocks</a></li>
<li><a href="#orgb6f3276">Source Files</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<section id="outline-container-orgb1dbe3c" class="outline-2">
<h2 id="orgb1dbe3c">Introduction</h2>
</section>
<section id="outline-container-org4c53b46" class="outline-2">
<h2 id="org4c53b46">Groundhog Emacs</h2>
<div class="outline-text-2" id="text-org4c53b46">
</div>
<div id="outline-container-org788eed5" class="outline-3">
<h3 id="org788eed5">Known Bugs</h3>
<div class="outline-text-3" id="text-org788eed5">
</div>
<div id="outline-container-orgfcd2de6" class="outline-4">
<h4 id="orgfcd2de6">Ox-org isn't on by default</h4>
</div>
<div id="outline-container-org08df108" class="outline-4">
<h4 id="org08df108">Ivy-mode needs to be toggled on startup</h4>
</div>
</div>
<div id="outline-container-org3fef1b4" class="outline-3">
<h3 id="org3fef1b4">Components</h3>
<div class="outline-text-3" id="text-org3fef1b4">
<div id="text-table-of-contents">
<ul>
<li><a href="#org8d7f784">Basics</a></li>
<li><a href="#org5d263c9">HTMLize</a></li>
<li><a href="#orgb7874b3">Ivy</a></li>
<li><a href="#org6fb2833">Magit</a></li>
<li><a href="#orga723fe3">Org</a></li>
</ul>
</div>
</div>
<div id="outline-container-org8d7f784" class="outline-4">
<h4 id="org8d7f784">Basics</h4>
<div class="outline-text-4" id="text-org8d7f784">
</div>
<ul class="org-ul">
<li><a id="org74e01a0"></a>User configuration<br>
<ul class="org-ul">
<li><a id="orge034237"></a>Full name<br></li>
<li><a id="org7a4f2ed"></a>Email<br>
<div class="outline-text-6" id="text-org7a4f2ed">
<div class="org-src-container">
<pre class="src src-text" id="org2464665">emsenn@emsenn.net
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgf0da2b4"></a>Bugfixes &amp; Version-handling<br>
<ul class="org-ul">
<li><a id="org2f33859"></a>Bugfixes<br>
<ul class="org-ul">
<li><a id="orgfada420"></a>Isearch occur bugfix<br>
<div class="outline-text-7" id="text-orgfada420">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>A fix for an isearch bug</label><pre class="src src-elisp" id="orgc65a2d8">(<span class="org-keyword">defadvice</span> <span class="org-function-name">isearch-occur</span> (after isearch-occur-fix activate)
    <span class="org-doc">"Fix bug #20971: http://debbugs.gnu.org/cgi/bugreport.cgi?bug=20971"</span>
    (<span class="org-keyword">setq</span> buffer-read-only nil))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgbf270d3"></a>Version-handling<br>
<ul class="org-ul">
<li><a id="orga656831"></a>Fix TLS on Emacs &lt;26.3<br>
<div class="outline-text-7" id="text-orga656831">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Fix TLS stuff on Emacs &lt;26.3</label><pre class="src src-elisp" id="orgced713d">(<span class="org-keyword">if</span> (<span class="org-keyword">and</span> (version&lt; emacs-version <span class="org-string">"26.3"</span>) (&gt;= libgnutls-version 30600))
    (<span class="org-keyword">setq</span> gnutls-algorithm-priority <span class="org-string">"NORMAL:-VERS-TLS1.3"</span>))
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="org1618efb"></a>Package Handling<br>
<ul class="org-ul">
<li><a id="orga0b602a"></a>Package installation<br>
<div class="outline-text-6" id="text-orga0b602a">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Install straight.el and use-package</label><pre class="src src-elisp" id="org897e676">(<span class="org-keyword">defvar</span> <span class="org-variable-name">straight-install-script-path</span>
  <span class="org-string">"https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"</span>)

(<span class="org-keyword">defvar</span> <span class="org-variable-name">bootstrap-version</span>)
(<span class="org-keyword">let</span> ((bootstrap-file
       (expand-file-name <span class="org-string">"straight/repos/straight.el/bootstrap.el"</span> user-emacs-directory))
      (bootstrap-version 5))
  (<span class="org-keyword">unless</span> (file-exists-p bootstrap-file)
    (<span class="org-keyword">with-current-buffer</span>
        (url-retrieve-synchronously straight-install-script-path
         'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))

(straight-use-package 'use-package)
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org647fa76"></a>Save behavior<br>
<div class="outline-text-5" id="text-org647fa76">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>Turn off backups</label><pre class="src src-elisp" id="org6322b85">(<span class="org-keyword">setq</span> make-backup-files nil)
</pre>
</div>
</div>
</li>
<li><a id="org3da6097"></a>Startup behavior<br>
<div class="outline-text-5" id="text-org3da6097">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>Turn off the startup screen</label><pre class="src src-elisp" id="org569837d">(<span class="org-keyword">setq</span> initial-scratch-message <span class="org-string">";; landback"</span>)
(<span class="org-keyword">setq</span> inhibit-startup-message t)

(<span class="org-keyword">setq</span> inhibit-startup-screen t)
</pre>
</div>
</div>
</li>
<li><a id="org4047378"></a>UI<br>
<ul class="org-ul">
<li><a id="org713c4b2"></a>Theme<br>
<div class="outline-text-6" id="text-org713c4b2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Configure the theme</label><pre class="src src-elisp" id="org04216e6">(<span class="org-keyword">use-package</span> <span class="org-constant">tao-theme</span> <span class="org-builtin">:straight</span> t
  <span class="org-builtin">:config</span> (load-theme 'tao-yin t))

</pre>
</div>
</div>
</li>
<li><a id="orgc2d99b8"></a>UI Configuration<br>
<div class="outline-text-6" id="text-orgc2d99b8">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>UI configuration</label><pre class="src src-elisp" id="org6e46c82">  (<span class="org-keyword">setq</span> echo-keystrokes 0.1)
(menu-bar-mode 1)
  (tool-bar-mode -1)
  (show-paren-mode 1)
  (<span class="org-keyword">setq</span> fill-column 68)
  (<span class="org-keyword">setq</span> mouse-wheel-scroll-amount '(1 ((shift) .1)))
  (<span class="org-keyword">setq</span> line-number-mode t)
  (<span class="org-keyword">setq</span> column-number-mode t)
  (<span class="org-keyword">setq-default</span> truncate-lines t)
  (<span class="org-keyword">setq-default</span> line-spacing 1)
  (<span class="org-keyword">setq</span> sentence-end-double-space nil)

  (<span class="org-keyword">when</span> (fboundp 'windmove-default-keybindings)
    (windmove-default-keybindings))

  (global-visual-line-mode t)

</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-org5d263c9" class="outline-4">
<h4 id="org5d263c9">HTMLize</h4>
<div class="outline-text-4" id="text-org5d263c9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>HTMLize</label><pre class="src src-elisp" id="org41534c8">(<span class="org-keyword">use-package</span> <span class="org-constant">htmlize</span> <span class="org-builtin">:straight</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb7874b3" class="outline-4">
<h4 id="orgb7874b3">Ivy</h4>
<div class="outline-text-4" id="text-orgb7874b3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>Setup ivy</label><pre class="src src-elisp" id="org413407b">(<span class="org-keyword">use-package</span> <span class="org-constant">ivy</span>
   <span class="org-builtin">:straight</span> t
   <span class="org-builtin">:diminish</span> (ivy-mode . <span class="org-string">""</span>)
   <span class="org-builtin">:bind</span> ((<span class="org-string">"C-c C-r"</span> . ivy-resume))
   <span class="org-builtin">:config</span> (ivy-mode 1)
   (<span class="org-keyword">setq</span> ivy-use-virtual-buffers t)
   (<span class="org-keyword">setq</span> ivy-height 12)
   (<span class="org-keyword">setq</span> ivy-count-format <span class="org-string">"(%d/%d) "</span>)
   (<span class="org-keyword">setq</span> ivy-initial-inputs-alist nil)
   (<span class="org-keyword">setq</span> ivy-re-builders-alist
         '((read-file-name-internal . ivy--regex-fuzzy)
           (t . ivy--regex-ignore-order))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6fb2833" class="outline-4">
<h4 id="org6fb2833">Magit</h4>
<div class="outline-text-4" id="text-org6fb2833">
<div class="org-src-container">
<pre class="src src-elisp" id="org72ae7c6">(<span class="org-keyword">use-package</span> <span class="org-constant">magit</span> <span class="org-builtin">:straight</span> t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga723fe3" class="outline-4">
<h4 id="orga723fe3">Org</h4>
<div class="outline-text-4" id="text-orga723fe3">
</div>
<ul class="org-ul">
<li><a id="org2c79b87"></a>Org configuration<br>
<ul class="org-ul">
<li><a id="org694bc6a"></a>Org variables<br>
<ul class="org-ul">
<li><a id="org042e87c"></a>Org directory<br>
<div class="outline-text-7" id="text-org042e87c">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>The value of org-directory</label><pre class="src src-text" id="org050f363">"~/org"
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org4db88d9"></a>Org hooks<br>
<div class="outline-text-6" id="text-org4db88d9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>Org hooks</label><pre class="src src-elisp" id="org351ac00">(org-export-before-processing-hook . ghe-org-export-preprocessor)
</pre>
</div>
</div>
</li>
<li><a id="org228c83e"></a>Org bindings<br>
<div class="outline-text-6" id="text-org228c83e">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>Org bindings</label><pre class="src src-elisp" id="org79bdd41">(<span class="org-string">"C-c l"</span> . org-store-link)
           (<span class="org-string">"C-c a"</span> . org-agenda)
           (<span class="org-string">"C-c c"</span> . org-capture)
           (<span class="org-string">"C-c t"</span> . org-toggle-link-display)
           (<span class="org-string">"C-c C-q"</span> . counsel-org-tag)
           (<span class="org-string">"&lt;f8&gt;"</span> . ghe-org-capture-capture-at-point)
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgdbc836c"></a>Org-agenda<br>
<ul class="org-ul">
<li><a id="orgd232b56"></a>Org-agenda configuration<br>
<ul class="org-ul">
<li><a id="orged19cf2"></a>Org agenda files<br>
<div class="outline-text-7" id="text-orged19cf2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>The value of org-agenda-files</label><pre class="src src-text" id="org7b0e30c">(list "~/org")
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="org6acbab6"></a>Org-attach-screenshot<br>
<div class="outline-text-5" id="text-org6acbab6">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 14: </span>Org-attach-screenshot</label><pre class="src src-elisp" id="org919c121">(<span class="org-keyword">use-package</span> <span class="org-constant">org-attach-screenshot</span> <span class="org-builtin">:straight</span> t
   <span class="org-builtin">:config</span> (<span class="org-keyword">setq</span>
            org-attach-screenshot-command-line <span class="org-string">"spectacle -rbno $f"</span>))
</pre>
</div>
</div>
</li>
<li><a id="org22fc0c4"></a>Org-babel<br>
<ul class="org-ul">
<li><a id="org2621fe9"></a>Org-babel configuration<br>
<div class="outline-text-6" id="text-org2621fe9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 15: </span>Org-babel configuration Elisp</label><pre class="src src-elisp" id="orgb8de2a4">(org-babel-do-load-languages 'org-babel-load-languages
                              '((shell . t)))

</pre>
</div>
</div>
</li>
<li><a id="orgeff7fcb"></a>Org-babel functions<br>
<ul class="org-ul">
<li><a id="orgaf25ff9"></a>Org-mode to Elisp functions<br>
<ul class="org-ul">
<li><a id="org0b785ea"></a>Org-table to defvar<br>
<div class="outline-text-8" id="text-org0b785ea">
<div class="org-src-container">
<pre class="src src-elisp" id="orgbdf4d8e">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-table-to-defvar</span> (table)
  (string-join 
      (mapcar
       (<span class="org-keyword">lambda</span> (item)
         (print (concat <span class="org-string">"(defvar "</span>
                        (car item)
                        <span class="org-string">" \""</span>
                        (car (cdr item))
                        <span class="org-string">"\" \""</span>
                        (car (cdr (cdr item)))
                        <span class="org-string">"\")\n"</span>)))
         table)))
</pre>
</div>
</div>
</li>
<li><a id="org294655f"></a>Org-table to setq<br>
<div class="outline-text-8" id="text-org294655f">
<div class="org-src-container">
<pre class="src src-elisp" id="orgfb47106">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-table-to-setq</span> (table)
  (string-join 
      (mapcar
       (<span class="org-keyword">lambda</span> (item)
         (print (concat <span class="org-string">"(setq "</span>
                        (car item)
                        <span class="org-string">" "</span>
                        (car (cdr item))
                        <span class="org-string">")\n"</span>)))
         table)))
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="org0a561a1"></a>Org-capture<br>
<ul class="org-ul">
<li><a id="orgecd9621"></a>Org-capture functions<br>
<ul class="org-ul">
<li><a id="org4e252b0"></a>Capture at point<br>
<div class="outline-text-7" id="text-org4e252b0">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 16: </span>Capture at the current point</label><pre class="src src-elisp" id="org8d62acd">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-capture-capture-at-point</span> ()
   <span class="org-doc">"Insert an org capture template at point."</span>
   (<span class="org-keyword">interactive</span>)
   (org-capture 0))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org36a5181"></a>Org-capture templates<br>
<ul class="org-ul">
<li><a id="orgd053cb9"></a>Capture source code block<br>
<div class="outline-text-7" id="text-orgd053cb9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 17: </span>The capture template for capturing source blocks</label><pre class="src src-elisp" id="org60779d7">(<span class="org-string">"s"</span> <span class="org-string">"Capture source code block"</span>)
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org68350f1"></a>Capture Elisp source block<br>
<div class="outline-text-8" id="text-org68350f1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 18: </span>Capture an Elisp code block</label><pre class="src src-elisp" id="org6c8eaba">(<span class="org-string">"se"</span> <span class="org-string">"Elisp code block"</span>
             plain (clock)
             ,(concat <span class="org-string">"#+name: %^{NAME}-elisp\n"</span>
                      <span class="org-string">"#+caption: %^{CAPTION}\n"</span>
                    <span class="org-string">"#+begin_src elisp %^{HEADER-ARGS}\n"</span>
                    <span class="org-string">"%?\n"</span>
                    <span class="org-string">"#+end_src\n"</span>))
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="org5c65ab1"></a>Org-export<br>
<ul class="org-ul">
<li><a id="org463cf18"></a>Org-export configuration<br>
<div class="outline-text-6" id="text-org463cf18">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 19: </span>The value of org-export-with-section-numbers</label><pre class="src src-text" id="orgfa0e7eb">nil
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 20: </span>The value of org-export-with-smart-quotes</label><pre class="src src-text" id="org3ad801b">nil
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 21: </span>The value of org-export-with-toc</label><pre class="src src-text" id="org0501f33">nil
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 22: </span>Advise the use of ghe-org-export-output-file-name around org-export-output-file-name</label><pre class="src src-text" id="org0abfb72">(advice-add 'org-export-output-file-name :around
              #'ghe-org-export-output-file-name)
</pre>
</div>
</div>
</li>

<li><a id="org5377e46"></a>Org-export functions<br>
<div class="outline-text-6" id="text-org5377e46">
<p>
So, right now every Org-roam record <i>needs</i> a local variables block that gives advice to org-export-output-file-name, to pick whether it goes in ~/org/e (by default) or ~/org/e/d (for daily records).
</p>

<p>
This certainly isn't ideal, and I'd love a better way.
</p>
</div>
<ul class="org-ul">
<li><a id="org0ce08ad"></a>Change export output file name<br>
<div class="outline-text-7" id="text-org0ce08ad">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 23: </span>Save all Org-export documents (unless otherwise directed) into ~/org/e</label><pre class="src src-elisp" id="org4cb5322">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-export-output-file-name</span>
    (orig-fun extension <span class="org-type">&amp;optional</span> subtreep pub-dir)
  (<span class="org-keyword">unless</span> pub-dir
    (<span class="org-keyword">setq</span> pub-dir <span class="org-string">"~/org/e"</span>)
    (<span class="org-keyword">unless</span> (file-directory-p pub-dir)
      (make-directory pub-dir)))
  (apply orig-fun extension subtreep pub-dir nil))
</pre>
</div>
</div>
</li>
<li><a id="org4ae1e0f"></a>Change daily record export output file name<br>
<div class="outline-text-7" id="text-org4ae1e0f">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 24: </span>Save all Org-export documents (unless otherwise directed) into ~/org/e</label><pre class="src src-elisp" id="orge7811b2">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-export-daily-output-file-name</span>
    (orig-fun extension <span class="org-type">&amp;optional</span> subtreep pub-dir)
  (<span class="org-keyword">unless</span> pub-dir
    (<span class="org-keyword">setq</span> pub-dir <span class="org-string">"~/org/e/d"</span>)
    (<span class="org-keyword">unless</span> (file-directory-p pub-dir)
      (make-directory pub-dir)))
  (apply orig-fun extension subtreep pub-dir nil))
</pre>
</div>
</div>
</li>
<li><a id="orgd948c6e"></a>Preprocessor<br>
<div class="outline-text-7" id="text-orgd948c6e">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 25: </span>The preprocessor used by Org-export</label><pre class="src src-elisp" id="orgf495e7f">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-export-preprocessor</span> (backend)
  (<span class="org-keyword">let</span> ((links (ghe-org-roam-format-backlinks-list (buffer-file-name))))
    (<span class="org-keyword">unless</span> (string= links <span class="org-string">""</span>)
      (<span class="org-keyword">save-excursion</span>
        (goto-char (point-max))
        (insert (concat <span class="org-string">"\n* Backlinks\n"</span>) links)))))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orga0b5584"></a>HTML export<br>
<ul class="org-ul">
<li><a id="orge7e9e4a"></a>HTML export functions<br>
<ul class="org-ul">
<li><a id="org7bf4327"></a>Format drawer<br>
<div class="outline-text-8" id="text-org7bf4327">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 26: </span>Wrap drawers in a org-drawer class section tag</label><pre class="src src-elisp" id="org8a2679f">(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-html-format-drawer</span> (name contents)
  (format <span class="org-string">"&lt;section class=\"org-drawer\"&gt; %s &lt;/section&gt;"</span> contents))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org60af377"></a>HTML export configuration<br>
<div class="outline-text-7" id="text-org60af377">
<div class="org-src-container">
<pre class="src src-text" id="orgb8b30bb">'css
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org597d704"></a>Format drawer function<br>
<div class="outline-text-8" id="text-org597d704">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 27: </span>The value of org-html-format-drawer-function</label><pre class="src src-text" id="org5e1df49">'ghe-org-html-format-drawer
</pre>
</div>
</div>
</li>

<li><a id="org20af0cb"></a>Display validation link<br>
<div class="outline-text-8" id="text-org20af0cb">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 28: </span>The value of org-html-validation-link</label><pre class="src src-text" id="org0135a4d">nil
</pre>
</div>
</div>
</li>


<li><a id="org157e9f1"></a>HTML export preamble<br>
<div class="outline-text-8" id="text-org157e9f1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 29: </span>The preamble text inserted by Org-export after the opening body tag, and before the header tag.</label><pre class="src src-elisp" id="orgac71ca6">(<span class="org-keyword">setq</span> ghe-org-html-export-preamble
    (concat <span class="org-string">"&lt;section class=\"nav\"&gt;"</span>
            <span class="org-string">"&lt;a href=\""</span> ghe-org-html-base-url
            <span class="org-string">"index.html\"&gt;"</span>
            <span class="org-string">"homepage&lt;/a&gt; "</span>
            <span class="org-string">"&lt;a href=\""</span> ghe-org-html-base-url
            <span class="org-string">"records.html\"&gt;"</span>
            <span class="org-string">"record index&lt;/a&gt; "</span>
            <span class="org-string">"&lt;a href=\""</span> ghe-org-html-base-url
            <span class="org-string">"d/index.html\"&gt;"</span>
            <span class="org-string">"daily records"</span>
            <span class="org-string">"&lt;/a&gt;&lt;/section&gt;"</span>))
</pre>
</div>
</div>
</li>
<li><a id="org5ac512e"></a>HTML export head extra<br>
<div class="outline-text-8" id="text-org5ac512e">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 30: </span>The HTML put inside the head tag of files generated by Org-export</label><pre class="src src-elisp" id="org09038a5">(<span class="org-keyword">setq</span> ghe-org-html-export-head-extra
      (concat <span class="org-string">"&lt;link rel=\"stylesheet\" href=\""</span>
              ghe-org-html-base-url <span class="org-string">"style.css\"&gt;"</span>))
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="orgae9f355"></a>Org-log<br>
<div class="outline-text-5" id="text-orgae9f355">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 31: </span>The value of org-log-done</label><pre class="src src-text" id="org980ae86">'time
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 32: </span>The value of org-log-into-drawer</label><pre class="src src-text" id="org47291b7">'LOGBOOK
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 33: </span>The value of org-image-actual-width</label><pre class="src src-text" id="org66c18c8">'(400)
</pre>
</div>
</div>
</li>

<li><a id="orgc4a36e1"></a>Org-publish<br>
<ul class="org-ul">
<li><a id="orgdee0cc4"></a>Org-publish functions<br>
<ul class="org-ul">
<li><a id="org2bc255c"></a>Format sitemap<br>
<div class="outline-text-7" id="text-org2bc255c">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 34: </span>Format the sitemap org-mode file generated by sitemap</label><pre class="src src-elisp" id="org5c28309"><span class="org-comment-delimiter">;; </span><span class="org-comment">from https://www.john2x.com/blog/blogging-with-orgmode.html</span>
 (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-publish-format-sitemap</span> (title sitemap)
   (<span class="org-keyword">let</span> ((posts (cdr sitemap)))
     (concat
      (format <span class="org-string">"#+title: %s\n"</span> title)
      <span class="org-string">"#+roam_tags: meta\n"</span>
      (org-list-to-org (cons (car sitemap) posts)))))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org9286342"></a>Org-publish projects<br>
<ul class="org-ul">
<li><a id="org9085141"></a>Org-publish configuration<br>
<ul class="org-ul">
<li><a id="orga61f647"></a>Standard project configuration<br>
<div class="outline-text-8" id="text-orga61f647">
<p>
Please be aware that this configuration <i>will <b>not</b></i> work on its own: it is missing critical variables.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 35: </span>Standard configuration variables for an Org-project</label><pre class="src src-elisp" id="org6169c6b"><span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
<span class="org-builtin">:recursive</span> t
<span class="org-builtin">:publishing-function</span> org-html-publish-to-html
<span class="org-builtin">:html-doctype</span> <span class="org-string">"html5"</span>
<span class="org-builtin">:html-html5-fancy</span> t
<span class="org-builtin">:html-container</span> <span class="org-string">"section"</span>
<span class="org-builtin">:publishing-function</span> org-html-publish-to-html
<span class="org-builtin">:html-preamble</span> ,ghe-org-html-export-preamble
<span class="org-builtin">:html-format-drawer-function</span> ghe-org-html-format-drawer
<span class="org-builtin">:html-head-include-scripts</span> nil
<span class="org-builtin">:html-head-include-default-style</span> nil
<span class="org-builtin">:exclude</span> ,(regexp-opt '(<span class="org-string">"README.org"</span> <span class="org-string">"PRIVATE"</span>))
<span class="org-builtin">:auto-sitemap</span> t
<span class="org-builtin">:sitemap-function</span> ghe-org-publish-format-sitemap
<span class="org-builtin">:with-footnotes</span> t
<span class="org-builtin">:with-toc</span> nil
<span class="org-builtin">:with-drawers</span> t
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orge9ca78b"></a>Personal<br>
<div class="outline-text-7" id="text-orge9ca78b">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 36: </span>The elisp for personal org-publish project</label><pre class="src src-elisp" id="org33c6fd5">(<span class="org-string">"personal"</span> <span class="org-builtin">:components</span> (<span class="org-string">"personal-daily-records"</span> <span class="org-string">"personal-records"</span>))
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="orga8bd70b"></a>Personal Records<br>
<div class="outline-text-8" id="text-orga8bd70b">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 37: </span>The variables configuring a website</label><pre class="src src-elisp" id="org7b229ad"><span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/s/p"</span>
<span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/personal"</span>
<span class="org-builtin">:sitemap-filename</span> <span class="org-string">"records.org"</span>
<span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
<span class="org-builtin">:sitemap-title</span> <span class="org-string">"Records Index"</span>
</pre>
</div>
</div>
</li>
<li><a id="org371cd07"></a>Personal Daily Records<br>
<div class="outline-text-8" id="text-org371cd07">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 38: </span>The variables configuring a website</label><pre class="src src-elisp" id="org8f876c3"><span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/s/p/d"</span>
<span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/personal/d"</span>
<span class="org-builtin">:sitemap-filename</span> <span class="org-string">"index.org"</span>
<span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
<span class="org-builtin">:sitemap-title</span> <span class="org-string">"Daily Records Index"</span>
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org038fb8d"></a>Website<br>
<div class="outline-text-7" id="text-org038fb8d">
<div class="org-src-container">
<pre class="src src-text" id="org1f802c3">"file:///home/emsenn/org/p/personal/"
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 39: </span>The elisp for website org-publish project</label><pre class="src src-elisp" id="org78b5a00">(<span class="org-string">"website"</span> <span class="org-builtin">:components</span> (<span class="org-string">"website-daily-records"</span> <span class="org-string">"website-records"</span>))
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org6d6a87d"></a>Personal Records<br>
<div class="outline-text-8" id="text-org6d6a87d">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 40: </span>The variables configuring a website</label><pre class="src src-elisp" id="org6d3b2ec"><span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/e"</span>
<span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/website"</span>
<span class="org-builtin">:sitemap-filename</span> <span class="org-string">"records.org"</span>
<span class="org-builtin">:sitemap-title</span> <span class="org-string">"Record Index"</span>
</pre>
</div>
</div>
</li>
<li><a id="orga528e41"></a>Personal Daily Records<br>
<div class="outline-text-8" id="text-orga528e41">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 41: </span>The variables configuring a website</label><pre class="src src-elisp" id="orgde2882b"><span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/e/d"</span>
<span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/personal/d"</span>
<span class="org-builtin">:sitemap-filename</span> <span class="org-string">"index.org"</span>
<span class="org-builtin">:sitemap-title</span> <span class="org-string">"Daily Records Index"</span>
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>

<li><a id="org6b7f725"></a>Org-roam<br>
<ul class="org-ul">
<li><a id="org33275ab"></a>Org-roam configuration<br>
<ul class="org-ul">
<li><a id="org00dbe4d"></a>Org-roam directory<br>
<div class="outline-text-7" id="text-org00dbe4d">
<div class="org-src-container">
<pre class="src src-text" id="org53539e9">"~/org/s/p"
</pre>
</div>
</div>
</li>
<li><a id="org3a7f196"></a>Org-roam bindings<br>
<ul class="org-ul">
<li><a id="org3dba0ef"></a>Org-roam bindings for Org-roam-mode<br>
<div class="outline-text-8" id="text-org3dba0ef">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 42: </span>The bindings used when Org-roam-mode is active</label><pre class="src src-elisp" id="orge1fdd52">(<span class="org-string">"&lt;f5&gt;"</span> . org-roam-dailies-capture-today)
(<span class="org-string">"&lt;f9&gt;"</span> . org-roam-dailies-find-today)
(<span class="org-string">"C-c n l"</span> . org-roam)
(<span class="org-string">"C-c n f"</span> . org-roam-find-file)
(<span class="org-string">"C-c n g"</span> . org-roam-graph)
</pre>
</div>
</div>
</li>
<li><a id="org234a1f1"></a>Org-roam bindings for Org-mode<br>
<div class="outline-text-8" id="text-org234a1f1">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 43: </span>The bindings used when Org-roam-mode is active</label><pre class="src src-elisp" id="org8b70305">((<span class="org-string">"C-c n i"</span> . org-roam-insert)
(<span class="org-string">"C-c n I"</span> . org-roam-insert-immediate))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orge5f5716"></a>Org-roam hooks<br>
<div class="outline-text-7" id="text-orge5f5716">
<div class="org-src-container">
<pre class="src src-elisp" id="orgfb25406">(after-init . org-roam-mode)
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org90aa161"></a>Org-roam functions<br>
<ul class="org-ul">
<li><a id="org9905f14"></a>Format backlinks list<br>
<div class="outline-text-7" id="text-org9905f14">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 44: </span>Generate an Org-mode format list of backlinks for a given file</label><pre class="src src-elisp" id="org514c7f4"><span class="org-comment-delimiter">;; </span><span class="org-comment">from doubleloop's commonplace wiki</span>
(<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-roam-format-backlinks-list</span> (file)
  (<span class="org-keyword">if</span> (org-roam--org-roam-file-p file)
      (<span class="org-keyword">--reduce-from</span>
       (concat acc
               (format
                <span class="org-string">"- [[file:%s][%s]]\n"</span>
                (<span class="org-keyword">if</span> (string= (org-roam-dailies-directory--get-absolute-path)
                             (file-name-directory file))
                    (file-relative-name (car it))
                  (file-relative-name (car it) org-roam-directory))
                (org-roam-db--get-title (car it))))
       <span class="org-string">""</span> (org-roam-db-query
           [<span class="org-builtin">:select</span> [source]
                    <span class="org-builtin">:from</span> links
                    <span class="org-builtin">:where</span> (= dest $s1)] <span class="org-warning">file))</span>
    <span class="org-string">""</span>))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="org60250da"></a>Org-roam-capture<br>
<ul class="org-ul">
<li><a id="org072d320"></a>Org-roam-capture templates<br>
<div class="outline-text-7" id="text-org072d320">
<ul class="org-ul">
<li>Used tags:
<ul class="org-ul">
<li>General tags
<ul class="org-ul">
<li>meta</li>
<li>term</li>
<li>daily-record</li>
</ul></li>
<li>Domain tags
<ul class="org-ul">
<li>Teraum</li>
<li>Emacs</li>
<li>ILS</li>
</ul></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="orgf9f7763"></a>Record<br>
<div class="outline-text-7" id="text-orgf9f7763">
<p>
A <b><i>record</i></b> is the most basic type of information handled by Groundhog Emacs.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 45: </span>The currently active version of the <code>record</code> schema.</label><pre class="src src-text" id="org916c7b6">record-0.1.1
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 46: </span>The Org-roam capture template for Record</label><pre class="src src-elisp" id="orgdd5d307">(<span class="org-string">"r"</span> <span class="org-string">"Record"</span>
            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
            <span class="org-string">"%?\n"</span>
            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                           <span class="org-string">"#+begin_head\n"</span>
                           <span class="org-string">"#+ghe_schema: "</span>
                           <span class="org-string">"record-0.1.1\n"</span>
                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                           <span class="org-string">"#+date: %U\n"</span>
                           <span class="org-string">"#+export_file_name: ../../e/${slug}\n"</span>
                           <span class="org-string">"#+roam_tags: term\n"</span>
                           <span class="org-string">"#+end_head\n"</span>)
            <span class="org-builtin">:unnarrowed</span> t)
</pre>
</div>
</div>
</li>
<li><a id="org1a500e7"></a>Term<br>
<div class="outline-text-7" id="text-org1a500e7">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 47: </span>The currently active version of the <code>record</code> schema.</label><pre class="src src-text" id="orgcbc1fe3">term-0.1.0
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 48: </span>blah</label><pre class="src src-elisp" id="org5cfd150">(<span class="org-string">"t"</span> <span class="org-string">"term"</span>
            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
            <span class="org-string">"%?\n"</span>
            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                           <span class="org-string">"#+begin_head\n"</span>
                           <span class="org-string">"#+ghe_schema: "</span>
                           <span class="org-string">"record-0.1.1"</span>
                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                           <span class="org-string">"#+date: %U\n"</span>
                           <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-${slug}\n"</span>
                           <span class="org-string">"#+roam_tags: term\n"</span>
                           <span class="org-string">"#+end_head\n"</span>)
            <span class="org-builtin">:unnarrowed</span> t)
</pre>
</div>
</div>
</li>
<li><a id="org42ec04d"></a>Reference<br>
<div class="outline-text-7" id="text-org42ec04d">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 49: </span>The currently active version of the <code>record</code> schema.</label><pre class="src src-text" id="org3502b56">reference-0.1.0
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 50: </span>Org-roam capture template for reference records</label><pre class="src src-elisp" id="org28002c7">   (<span class="org-string">"R"</span> <span class="org-string">"reference"</span>
               plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
               <span class="org-string">"#+roam_key: %^{SOURCE}\n#+end_head\n%?\n"</span>
               <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
               <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                              <span class="org-string">"#+begin_head\n"</span>
                              <span class="org-string">"#+ghe_schema: "</span>
                              <span class="org-string">""</span>
                              <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                              <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                              <span class="org-string">"#+date: %U\n"</span>
                              <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-</span>
<span class="org-string">${slug}\n"</span>
                              <span class="org-string">"#+roam_tags: term\n"</span>)
               <span class="org-builtin">:unnarrowed</span> t)
</pre>
</div>
</div>
</li>
<li><a id="org7ae58a2"></a>Person<br>
<div class="outline-text-7" id="text-org7ae58a2">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 51: </span>The currently active version of the <code>record</code> schema.</label><pre class="src src-text" id="org7601f46">person-0.1.0
</pre>
</div>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 52: </span>Org-roam capture template for person records</label><pre class="src src-elisp" id="org6d886f7">(<span class="org-string">"p"</span> <span class="org-string">"person"</span>
            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
            <span class="org-string">"%?\n"</span>
            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                           <span class="org-string">"#+begin_head\n"</span>
                           <span class="org-string">"#+ghe_schema: "</span>
                           <span class="org-string">"person-0.1.0"</span>
                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                           <span class="org-string">"#+date: %U\n"</span>
                           <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-${slug}\n"</span>
                           <span class="org-string">"#+roam_tags: term\n"</span>
                           <span class="org-string">"#+end_head\n"</span>)
            <span class="org-builtin">:unnarrowed</span> t)
</pre>
</div>
</div>
</li>
<li><a id="org8c460e9"></a>Teraum<br>
<div class="outline-text-7" id="text-org8c460e9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 53: </span>Org-roam capture template for Teraum records</label><pre class="src src-elisp" id="org075e617">(<span class="org-string">"T"</span> <span class="org-string">"Teraum"</span>)
</pre>
</div>
</div>
<ul class="org-ul">
<li><a id="org884cb11"></a>Teraum record<br>
<div class="outline-text-8" id="text-org884cb11">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 54: </span>Org-roam capture-template for general Teraum records</label><pre class="src src-elisp" id="orgc128f96">(<span class="org-string">"Tt"</span> <span class="org-string">"General entry"</span>
            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
            <span class="org-string">"%?"</span>
            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                           <span class="org-string">"#+date: %U\n"</span>
                           <span class="org-string">"#+roam_tags: Teraum"</span>)
            <span class="org-builtin">:unnarrowed</span> t)
</pre>
</div>
</div>
</li>
<li><a id="org1700a5f"></a>Teraum person<br>
<div class="outline-text-8" id="text-org1700a5f">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 55: </span>Org-roam capture template for a Teraum person record</label><pre class="src src-elisp" id="org6d66007">(<span class="org-string">"Tp"</span> <span class="org-string">"Person"</span>
            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
            <span class="org-string">"%?\n\n- Species :: %^{SPECIES}\n- Age :: %^{AGE}\n- Pronouns :: %^{PRONOUNS|e/em/eir|she/her/hers|he/him/his|they/them/theirs}\n- Location :: %^{LOCATION}"</span>
            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                           <span class="org-string">"#+date: %U\n"</span>
                           <span class="org-string">"#+roam_tags: Teraum\n\n"</span>)
            <span class="org-builtin">:unnarrowed</span> t)
</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><a id="orgceb54a2"></a>Org-roam-dailies<br>
<ul class="org-ul">
<li><a id="org52c509d"></a>Org-roam-dailies directory<br>
<div class="outline-text-7" id="text-org52c509d">
<div class="org-src-container">
<pre class="src src-text" id="orga6f4c77">"d/"
</pre>
</div>
</div>
</li>

<li><a id="org0ffc99a"></a>Org-roam-dailies capture templates<br>
<ul class="org-ul">
<li><a id="orgd1538f4"></a>Known issues<br>
<div class="outline-text-8" id="text-orgd1538f4">
<ul class="org-ul">
<li>Title isn't properly set in daily records</li>
</ul>
</div>
</li>
<li><a id="orgeb9015e"></a>Activity<br>
<div class="outline-text-8" id="text-orgeb9015e">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 56: </span>The capture template for recording an Activity log</label><pre class="src src-elisp" id="org14aa145">(<span class="org-string">"a"</span> <span class="org-string">"Activity entry"</span> entry
                    #'org-roam-capture--get-point
                    <span class="org-string">"* %U\n%?"</span>
                    <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                    <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                   <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                   <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                   <span class="org-string">"#+date: %U\n"</span>
                                   <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-${slug}\n"</span>
                                   <span class="org-string">"#+roam_tags: daily-journal"</span>)
<span class="org-builtin">:olp</span> (<span class="org-string">"Activity Log   :noexport:"</span>))
</pre>
</div>
</div>
</li>
<li><a id="org9aea6f8"></a>Journal entry<br>
<div class="outline-text-8" id="text-org9aea6f8">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 57: </span>The capture template for recording a Journal entry</label><pre class="src src-elisp" id="orgc23b34a">(<span class="org-string">"j"</span> <span class="org-string">"Journal entry"</span> entry
                    #'org-roam-capture--get-point
                    <span class="org-string">"* %U\n%?"</span>
                    <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                    <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                   <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                   <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                   <span class="org-string">"#+date: %U\n"</span>
                                   <span class="org-string">"#+roam_tags: daily-journal"</span>)
<span class="org-builtin">:olp</span> (<span class="org-string">"Journal   :noexport:"</span>))
</pre>
</div>
</div>
</li>
<li><a id="orgf15d0ce"></a>Media log entry<br>
<div class="outline-text-8" id="text-orgf15d0ce">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 58: </span>The capture template for recording a Media log entry</label><pre class="src src-elisp" id="orgc0a078b">
(<span class="org-string">"m"</span> <span class="org-string">"Discovered media"</span> entry
 #'org-roam-capture--get-point
 <span class="org-string">"* DISCOVERED %^{AUTHOR}: \"%^{TITLE}\"\n  :LOGBOOK:\n  - Note taken on %U \\\\\n  %?\n  :END:\n- Source: %^{SOURCE}\n"</span>
 <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
 <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                <span class="org-string">"#+date: %U\n"</span>
                <span class="org-string">"#+roam_tags: daily-journal"</span>)
 <span class="org-builtin">:olp</span> (<span class="org-string">"Media Log   :noexport:"</span>))
</pre>
</div>
</div>
</li>
<li><a id="orgf6a876b"></a>Weather observation<br>
<div class="outline-text-8" id="text-orgf6a876b">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 59: </span>blah</label><pre class="src src-elisp" id="org1cab044">(<span class="org-string">"w"</span> <span class="org-string">"Weather observation"</span> entry
                    #'org-roam-capture--get-point
                    <span class="org-string">"* %U\n%?"</span>
                    <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                    <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                   <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                   <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                   <span class="org-string">"#+date: %U\n"</span>
                                   <span class="org-string">"#+roam_tags: daily-journal"</span>)
                    <span class="org-builtin">:olp</span> (<span class="org-string">"Weather Log   :noexport:"</span>))
</pre>
</div>
</div>
</li>
<li><a id="org67ef3a9"></a>Thoughts<br>
<div class="outline-text-8" id="text-org67ef3a9">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 60: </span>blah</label><pre class="src src-elisp" id="org97481c5">(<span class="org-string">"t"</span> <span class="org-string">"thought"</span>)
(<span class="org-string">"tp"</span> <span class="org-string">"private thought"</span> entry
 #'org-roam-capture--get-point
 <span class="org-string">"* %U\n%?"</span>
 <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
 <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                <span class="org-string">"#+date: %U\n"</span>
                <span class="org-string">"#+roam_tags: daily-journal"</span>)
 <span class="org-builtin">:olp</span> (<span class="org-string">"Private thoughts   :noexport:"</span>))
(<span class="org-string">"ts"</span> <span class="org-string">"private thought"</span> entry
 #'org-roam-capture--get-point
 <span class="org-string">"* %U\n%?"</span>
 <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
 <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                <span class="org-string">"#+date: %U\n"</span>
                <span class="org-string">"#+roam_tags: daily-journal"</span>)
 <span class="org-builtin">:olp</span> (<span class="org-string">"Shared thoughts"</span>))
</pre>
</div>
</div>
</li>
</ul>
</li>
<li><a id="orgbb57765"></a>Org-roam-server<br>
<div class="outline-text-7" id="text-orgbb57765">
<div class="org-src-container">
<pre class="src src-elisp" id="org6d2db8a">(<span class="org-keyword">use-package</span> <span class="org-constant">org-roam-server</span> <span class="org-builtin">:straight</span> t)

</pre>
</div>
</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</section>
<section id="outline-container-org6b1b90d" class="outline-2">
<h2 id="org6b1b90d">Supplements</h2>
<div class="outline-text-2" id="text-org6b1b90d">
</div>
<div id="outline-container-org178bb37" class="outline-3">
<h3 id="org178bb37">Table of Contents</h3>
<div class="outline-text-3" id="text-org178bb37">
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb1dbe3c">Introduction</a></li>
<li><a href="#org4c53b46">Groundhog Emacs</a>
<ul>
<li><a href="#org788eed5">Known Bugs</a>
<ul>
<li><a href="#orgfcd2de6">Ox-org isn't on by default</a></li>
<li><a href="#org08df108">Ivy-mode needs to be toggled on startup</a></li>
</ul>
</li>
<li><a href="#org3fef1b4">Components</a>
<ul>
<li><a href="#org8d7f784">Basics</a></li>
<li><a href="#org5d263c9">HTMLize</a></li>
<li><a href="#orgb7874b3">Ivy</a></li>
<li><a href="#org6fb2833">Magit</a></li>
<li><a href="#orga723fe3">Org</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6b1b90d">Supplements</a>
<ul>
<li><a href="#org178bb37">Table of Contents</a></li>
<li><a href="#org6eec4ae">Decisions</a></li>
<li><a href="#orgaf2ea95">Elisp Code Blocks</a>
<ul>
<li><a href="#orgcfba528">Table to defvar</a></li>
<li><a href="#orgd736823">Table to setq</a></li>
<li><a href="#org90bd827">Clean HTML</a></li>
</ul>
</li>
<li><a href="#orgb6f3276">Source Files</a>
<ul>
<li><a href="#org2f3cc80">bare-init.el</a></li>
<li><a href="#org3a7007d">init.el</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
</div>
</div>
<div id="outline-container-org6eec4ae" class="outline-3">
<h3 id="org6eec4ae">Decisions</h3>
<div class="outline-text-3" id="text-org6eec4ae">
<p>
This section is intended to catalog the decisions made to guide the development of Groundhog Emacs. As the tool is in the very-earliest stages of development, right now decisions are made informally and entirely by emsenn.
</p>
</div>
</div>
<div id="outline-container-orgaf2ea95" class="outline-3">
<h3 id="orgaf2ea95">Elisp Code Blocks</h3>
<div class="outline-text-3" id="text-orgaf2ea95">
<p>
The follow code blocks allow for functional use of select Elisp functions within the Org-babel system. They're used, for example, to build the init.el below out of tables in this Org-mode document. Since they're used in Org-mode documents for outputting Org-mode text, their names omit language declarations.
</p>
</div>
<div id="outline-container-orgcfba528" class="outline-4">
<h4 id="orgcfba528">Table to defvar</h4>
<div class="outline-text-4" id="text-orgcfba528">
<div class="org-src-container">
<pre class="src src-elisp" id="org0ed2869">(ghe-org-table-to-defvar input)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd736823" class="outline-4">
<h4 id="orgd736823">Table to setq</h4>
<div class="outline-text-4" id="text-orgd736823">
<div class="org-src-container">
<pre class="src src-elisp" id="orgf45ab96">(ghe-org-table-to-setq input)
</pre>
</div>
</div>
</div>
<div id="outline-container-org90bd827" class="outline-4">
<h4 id="org90bd827">Clean HTML</h4>
<div class="outline-text-4" id="text-org90bd827">
<div class="org-src-container">
<pre class="src src-elisp" id="org731a8b0"><span class="org-comment-delimiter">;;</span><span class="org-comment">(replace-regexp-in-string "\"" "\"" input)</span>
(prin1-to-string input)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb6f3276" class="outline-3">
<h3 id="orgb6f3276">Source Files</h3>
<div class="outline-text-3" id="text-orgb6f3276">
</div>
<div id="outline-container-org2f3cc80" class="outline-4">
<h4 id="org2f3cc80">bare-init.el</h4>
<div class="outline-text-4" id="text-org2f3cc80">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 61: </span>A simpler init file</label><pre class="src src-elisp" id="org6443bff">&lt;&lt;emacs-lessthan-26-3-tls-fix-elisp&gt;&gt;
&lt;&lt;isearch-occur-bugfix-elisp&gt;&gt;
&lt;&lt;package-installation-elisp&gt;&gt;

&lt;&lt;theme-configuration-elisp&gt;&gt;

&lt;&lt;ui-configuration-elisp&gt;&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org3a7007d" class="outline-4">
<h4 id="org3a7007d">init.el</h4>
<div class="outline-text-4" id="text-org3a7007d">
<div class="org-src-container">
<pre class="src src-elisp" id="orgc38641b">    (<span class="org-keyword">if</span> (<span class="org-keyword">and</span> (version&lt; emacs-version <span class="org-string">"26.3"</span>) (&gt;= libgnutls-version 30600))
        (<span class="org-keyword">setq</span> gnutls-algorithm-priority <span class="org-string">"NORMAL:-VERS-TLS1.3"</span>))
    (<span class="org-keyword">defadvice</span> <span class="org-function-name">isearch-occur</span> (after isearch-occur-fix activate)
        <span class="org-doc">"Fix bug #20971: http://debbugs.gnu.org/cgi/bugreport.cgi?bug=20971"</span>
        (<span class="org-keyword">setq</span> buffer-read-only nil))

    (<span class="org-keyword">setq</span> user-mail-address <span class="org-string">"emsenn@emsenn.net"</span>)

    (<span class="org-keyword">defvar</span> <span class="org-variable-name">straight-install-script-path</span>
      <span class="org-string">"https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"</span>)

    (<span class="org-keyword">defvar</span> <span class="org-variable-name">bootstrap-version</span>)
    (<span class="org-keyword">let</span> ((bootstrap-file
           (expand-file-name <span class="org-string">"straight/repos/straight.el/bootstrap.el"</span> user-emacs-directory))
          (bootstrap-version 5))
      (<span class="org-keyword">unless</span> (file-exists-p bootstrap-file)
        (<span class="org-keyword">with-current-buffer</span>
        (url-retrieve-synchronously straight-install-script-path
         'silent 'inhibit-cookies)
          (goto-char (point-max))
          (eval-print-last-sexp)))
      (load bootstrap-file nil 'nomessage))

    (straight-use-package 'use-package)

    (<span class="org-keyword">setq</span> make-backup-files nil)

    (<span class="org-keyword">setq</span> initial-scratch-message <span class="org-string">";; landback"</span>)
    (<span class="org-keyword">setq</span> inhibit-startup-message t)

    (<span class="org-keyword">setq</span> inhibit-startup-screen t)

    (<span class="org-keyword">use-package</span> <span class="org-constant">tao-theme</span> <span class="org-builtin">:straight</span> t
      <span class="org-builtin">:config</span> (load-theme 'tao-yin t))


      (<span class="org-keyword">setq</span> echo-keystrokes 0.1)
    (menu-bar-mode 1)
      (tool-bar-mode -1)
      (show-paren-mode 1)
      (<span class="org-keyword">setq</span> fill-column 68)
      (<span class="org-keyword">setq</span> mouse-wheel-scroll-amount '(1 ((shift) .1)))
      (<span class="org-keyword">setq</span> line-number-mode t)
      (<span class="org-keyword">setq</span> column-number-mode t)
      (<span class="org-keyword">setq-default</span> truncate-lines t)
      (<span class="org-keyword">setq-default</span> line-spacing 1)
      (<span class="org-keyword">setq</span> sentence-end-double-space nil)

      (<span class="org-keyword">when</span> (fboundp 'windmove-default-keybindings)
        (windmove-default-keybindings))

      (global-visual-line-mode t)


    (<span class="org-keyword">use-package</span> <span class="org-constant">htmlize</span> <span class="org-builtin">:straight</span> t)

    (<span class="org-keyword">use-package</span> <span class="org-constant">ivy</span>
       <span class="org-builtin">:straight</span> t
       <span class="org-builtin">:diminish</span> (ivy-mode . <span class="org-string">""</span>)
       <span class="org-builtin">:bind</span> ((<span class="org-string">"C-c C-r"</span> . ivy-resume))
       <span class="org-builtin">:config</span> (ivy-mode 1)
       (<span class="org-keyword">setq</span> ivy-use-virtual-buffers t)
       (<span class="org-keyword">setq</span> ivy-height 12)
       (<span class="org-keyword">setq</span> ivy-count-format <span class="org-string">"(%d/%d) "</span>)
       (<span class="org-keyword">setq</span> ivy-initial-inputs-alist nil)
       (<span class="org-keyword">setq</span> ivy-re-builders-alist
         '((read-file-name-internal . ivy--regex-fuzzy)
           (t . ivy--regex-ignore-order))))

    (<span class="org-keyword">use-package</span> <span class="org-constant">magit</span> <span class="org-builtin">:straight</span> t)

    (<span class="org-keyword">use-package</span>
        org <span class="org-builtin">:straight</span> t
        <span class="org-builtin">:config</span> (<span class="org-keyword">setq</span> org-directory <span class="org-string">"~/org"</span>)
        (<span class="org-keyword">setq</span> org-agenda-files (list <span class="org-string">"~/org"</span>))
        (<span class="org-keyword">setq</span> org-export-with-section-numbers nil)
        (<span class="org-keyword">setq</span> org-export-with-smart-quotes nil)
        (<span class="org-keyword">setq</span> org-export-with-toc nil)
        (<span class="org-keyword">setq</span> org-html-htmlize-output-type 'css)
        (<span class="org-keyword">setq</span> org-html-validation-link nil)
        (<span class="org-keyword">setq</span> org-log-done 'time)
        (<span class="org-keyword">setq</span> org-log-into-drawer 'LOGBOOK)
        (<span class="org-keyword">setq</span> org-image-actual-width '(400))
        (<span class="org-keyword">setq</span> ghe-org-html-base-url <span class="org-string">"file:///home/emsenn/org/p/personal/"</span>)
        (<span class="org-keyword">setq</span> ghe-org-html-export-preamble
            (concat <span class="org-string">"&lt;section class=\"nav\"&gt;"</span>
                    <span class="org-string">"&lt;a href=\""</span> ghe-org-html-base-url
                    <span class="org-string">"index.html\"&gt;"</span>
                    <span class="org-string">"homepage&lt;/a&gt; "</span>
                    <span class="org-string">"&lt;a href=\""</span> ghe-org-html-base-url
                    <span class="org-string">"records.html\"&gt;"</span>
                    <span class="org-string">"record index&lt;/a&gt; "</span>
                    <span class="org-string">"&lt;a href=\""</span> ghe-org-html-base-url
                    <span class="org-string">"d/index.html\"&gt;"</span>
                    <span class="org-string">"daily records"</span>
                    <span class="org-string">"&lt;/a&gt;&lt;/section&gt;"</span>))
        (<span class="org-keyword">setq</span> ghe-org-html-export-head-extra
              (concat <span class="org-string">"&lt;link rel=\"stylesheet\" href=\""</span>
                      ghe-org-html-base-url <span class="org-string">"style.css\"&gt;"</span>))
        (org-babel-do-load-languages 'org-babel-load-languages
                                      '((shell . t)))

        (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-table-to-defvar</span> (table)
          (string-join 
              (mapcar
               (<span class="org-keyword">lambda</span> (item)
                 (print (concat <span class="org-string">"(defvar "</span>
                                (car item)
                                <span class="org-string">" \""</span>
                                (car (cdr item))
                                <span class="org-string">"\" \""</span>
                                (car (cdr (cdr item)))
                                <span class="org-string">"\")\n"</span>)))
                 table)))
        (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-table-to-setq</span> (table)
          (string-join 
              (mapcar
               (<span class="org-keyword">lambda</span> (item)
                 (print (concat <span class="org-string">"(setq "</span>
                                (car item)
                                <span class="org-string">" "</span>
                                (car (cdr item))
                                <span class="org-string">")\n"</span>)))
                 table)))
        (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-capture-capture-at-point</span> ()
           <span class="org-doc">"Insert an org capture template at point."</span>
           (<span class="org-keyword">interactive</span>)
           (org-capture 0))
        (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-export-preprocessor</span> (backend)
          (<span class="org-keyword">let</span> ((links (ghe-org-roam-format-backlinks-list (buffer-file-name))))
            (<span class="org-keyword">unless</span> (string= links <span class="org-string">""</span>)
              (<span class="org-keyword">save-excursion</span>
                (goto-char (point-max))
                (insert (concat <span class="org-string">"\n* Backlinks\n"</span>) links)))))
        (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-html-format-drawer</span> (name contents)
          (format <span class="org-string">"&lt;section class=\"org-drawer\"&gt; %s &lt;/section&gt;"</span> contents))
        <span class="org-comment-delimiter">;; </span><span class="org-comment">from https://www.john2x.com/blog/blogging-with-orgmode.html</span>
         (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-publish-format-sitemap</span> (title sitemap)
           (<span class="org-keyword">let</span> ((posts (cdr sitemap)))
             (concat
              (format <span class="org-string">"#+title: %s\n"</span> title)
              <span class="org-string">"#+roam_tags: meta\n"</span>
              (org-list-to-org (cons (car sitemap) posts)))))
        (<span class="org-keyword">setq</span> org-capture-templates
              `(
                (<span class="org-string">"s"</span> <span class="org-string">"Capture source code block"</span>)
                (<span class="org-string">"se"</span> <span class="org-string">"Elisp code block"</span>
                             plain (clock)
                             ,(concat <span class="org-string">"#+name: %^{NAME}-elisp\n"</span>
                                      <span class="org-string">"#+caption: %^{CAPTION}\n"</span>
                                    <span class="org-string">"#+begin_src elisp %^{HEADER-ARGS}\n"</span>
                                    <span class="org-string">"%?\n"</span>
                                    <span class="org-string">"#+end_src\n"</span>))
                ))
        (<span class="org-keyword">setq</span> org-publish-project-alist
              `(
                (<span class="org-string">"personal"</span> <span class="org-builtin">:components</span> (<span class="org-string">"personal-daily-records"</span> <span class="org-string">"personal-records"</span>))
                (<span class="org-string">"personal-records"</span>
                 <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
                 <span class="org-builtin">:recursive</span> t
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-doctype</span> <span class="org-string">"html5"</span>
                 <span class="org-builtin">:html-html5-fancy</span> t
                 <span class="org-builtin">:html-container</span> <span class="org-string">"section"</span>
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-preamble</span> ,ghe-org-html-export-preamble
                 <span class="org-builtin">:html-format-drawer-function</span> ghe-org-html-format-drawer
                 <span class="org-builtin">:html-head-include-scripts</span> nil
                 <span class="org-builtin">:html-head-include-default-style</span> nil
                 <span class="org-builtin">:exclude</span> ,(regexp-opt '(<span class="org-string">"README.org"</span> <span class="org-string">"PRIVATE"</span>))
                 <span class="org-builtin">:auto-sitemap</span> t
                 <span class="org-builtin">:sitemap-function</span> ghe-org-publish-format-sitemap
                 <span class="org-builtin">:with-footnotes</span> t
                 <span class="org-builtin">:with-toc</span> nil
                 <span class="org-builtin">:with-drawers</span> t
                 <span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/s/p"</span>
                 <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/personal"</span>
                 <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"records.org"</span>
                 <span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
                 <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Records Index"</span>)
                (<span class="org-string">"personal-daily-records"</span>
                 <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
                 <span class="org-builtin">:recursive</span> t
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-doctype</span> <span class="org-string">"html5"</span>
                 <span class="org-builtin">:html-html5-fancy</span> t
                 <span class="org-builtin">:html-container</span> <span class="org-string">"section"</span>
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-preamble</span> ,ghe-org-html-export-preamble
                 <span class="org-builtin">:html-format-drawer-function</span> ghe-org-html-format-drawer
                 <span class="org-builtin">:html-head-include-scripts</span> nil
                 <span class="org-builtin">:html-head-include-default-style</span> nil
                 <span class="org-builtin">:exclude</span> ,(regexp-opt '(<span class="org-string">"README.org"</span> <span class="org-string">"PRIVATE"</span>))
                 <span class="org-builtin">:auto-sitemap</span> t
                 <span class="org-builtin">:sitemap-function</span> ghe-org-publish-format-sitemap
                 <span class="org-builtin">:with-footnotes</span> t
                 <span class="org-builtin">:with-toc</span> nil
                 <span class="org-builtin">:with-drawers</span> t
                 <span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/s/p/d"</span>
                 <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/personal/d"</span>
                 <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"index.org"</span>
                 <span class="org-builtin">:sitemap-sort-files</span> anti-chronologically
                 <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Daily Records Index"</span>)
                (<span class="org-string">"website"</span> <span class="org-builtin">:components</span> (<span class="org-string">"website-daily-records"</span> <span class="org-string">"website-records"</span>))
                (<span class="org-string">"website-records"</span>
                 <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
                 <span class="org-builtin">:recursive</span> t
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-doctype</span> <span class="org-string">"html5"</span>
                 <span class="org-builtin">:html-html5-fancy</span> t
                 <span class="org-builtin">:html-container</span> <span class="org-string">"section"</span>
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-preamble</span> ,ghe-org-html-export-preamble
                 <span class="org-builtin">:html-format-drawer-function</span> ghe-org-html-format-drawer
                 <span class="org-builtin">:html-head-include-scripts</span> nil
                 <span class="org-builtin">:html-head-include-default-style</span> nil
                 <span class="org-builtin">:exclude</span> ,(regexp-opt '(<span class="org-string">"README.org"</span> <span class="org-string">"PRIVATE"</span>))
                 <span class="org-builtin">:auto-sitemap</span> t
                 <span class="org-builtin">:sitemap-function</span> ghe-org-publish-format-sitemap
                 <span class="org-builtin">:with-footnotes</span> t
                 <span class="org-builtin">:with-toc</span> nil
                 <span class="org-builtin">:with-drawers</span> t
                 <span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/e"</span>
                 <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/website"</span>
                 <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"records.org"</span>
                 <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Record Index"</span>)
                (<span class="org-string">"website-daily-records"</span>
                 <span class="org-builtin">:base-extension</span> <span class="org-string">"org"</span>
                 <span class="org-builtin">:recursive</span> t
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-doctype</span> <span class="org-string">"html5"</span>
                 <span class="org-builtin">:html-html5-fancy</span> t
                 <span class="org-builtin">:html-container</span> <span class="org-string">"section"</span>
                 <span class="org-builtin">:publishing-function</span> org-html-publish-to-html
                 <span class="org-builtin">:html-preamble</span> ,ghe-org-html-export-preamble
                 <span class="org-builtin">:html-format-drawer-function</span> ghe-org-html-format-drawer
                 <span class="org-builtin">:html-head-include-scripts</span> nil
                 <span class="org-builtin">:html-head-include-default-style</span> nil
                 <span class="org-builtin">:exclude</span> ,(regexp-opt '(<span class="org-string">"README.org"</span> <span class="org-string">"PRIVATE"</span>))
                 <span class="org-builtin">:auto-sitemap</span> t
                 <span class="org-builtin">:sitemap-function</span> ghe-org-publish-format-sitemap
                 <span class="org-builtin">:with-footnotes</span> t
                 <span class="org-builtin">:with-toc</span> nil
                 <span class="org-builtin">:with-drawers</span> t
                 <span class="org-builtin">:base-directory</span> <span class="org-string">"~/org/e/d"</span>
                 <span class="org-builtin">:publishing-directory</span> <span class="org-string">"~/org/p/personal/d"</span>
                 <span class="org-builtin">:sitemap-filename</span> <span class="org-string">"index.org"</span>
                 <span class="org-builtin">:sitemap-title</span> <span class="org-string">"Daily Records Index"</span>)))
        <span class="org-builtin">:hook</span> (org-export-before-processing-hook . ghe-org-export-preprocessor)
        <span class="org-builtin">:bind</span> (
               (<span class="org-string">"C-c l"</span> . org-store-link)
                   (<span class="org-string">"C-c a"</span> . org-agenda)
                   (<span class="org-string">"C-c c"</span> . org-capture)
                   (<span class="org-string">"C-c t"</span> . org-toggle-link-display)
                   (<span class="org-string">"C-c C-q"</span> . counsel-org-tag)
                   (<span class="org-string">"&lt;f8&gt;"</span> . ghe-org-capture-capture-at-point)
               ))

    (<span class="org-keyword">use-package</span> <span class="org-constant">org-attach-screenshot</span> <span class="org-builtin">:straight</span> t
       <span class="org-builtin">:config</span> (<span class="org-keyword">setq</span>
            org-attach-screenshot-command-line <span class="org-string">"spectacle -rbno $f"</span>))

    (<span class="org-keyword">use-package</span>
        org-roam <span class="org-builtin">:straight</span> t
        <span class="org-builtin">:config</span> (<span class="org-keyword">setq</span>
                 org-roam-directory <span class="org-string">"~/org/s/p"</span>
                 org-roam-dailies-directory <span class="org-string">"d/"</span>)
        <span class="org-comment-delimiter">;; </span><span class="org-comment">from doubleloop's commonplace wiki</span>
        (<span class="org-keyword">defun</span> <span class="org-function-name">ghe-org-roam-format-backlinks-list</span> (file)
          (<span class="org-keyword">if</span> (org-roam--org-roam-file-p file)
              (<span class="org-keyword">--reduce-from</span>
               (concat acc
                       (format
                        <span class="org-string">"- [[file:%s][%s]]\n"</span>
                        (<span class="org-keyword">if</span> (string= (org-roam-dailies-directory--get-absolute-path)
                                     (file-name-directory file))
                            (file-relative-name (car it))
                          (file-relative-name (car it) org-roam-directory))
                        (org-roam-db--get-title (car it))))
               <span class="org-string">""</span> (org-roam-db-query
                   [<span class="org-builtin">:select</span> [source]
                            <span class="org-builtin">:from</span> links
                            <span class="org-builtin">:where</span> (= dest $s1)] <span class="org-warning">file))</span>
            <span class="org-string">""</span>))
        (<span class="org-keyword">setq</span> org-roam-capture-templates
              `(
                (<span class="org-string">"r"</span> <span class="org-string">"Record"</span>
                            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
                            <span class="org-string">"%?\n"</span>
                            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
                            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                           <span class="org-string">"#+begin_head\n"</span>
                                           <span class="org-string">"#+ghe_schema: "</span>
                                           <span class="org-string">"record-0.1.1\n"</span>
                                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+date: %U\n"</span>
                                           <span class="org-string">"#+export_file_name: ../../e/${slug}\n"</span>
                                           <span class="org-string">"#+roam_tags: term\n"</span>
                                           <span class="org-string">"#+end_head\n"</span>)
                            <span class="org-builtin">:unnarrowed</span> t)
                (<span class="org-string">"t"</span> <span class="org-string">"term"</span>
                            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
                            <span class="org-string">"%?\n"</span>
                            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
                            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                           <span class="org-string">"#+begin_head\n"</span>
                                           <span class="org-string">"#+ghe_schema: "</span>
                                           <span class="org-string">"record-0.1.1"</span>
                                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+date: %U\n"</span>
                                           <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-${slug}\n"</span>
                                           <span class="org-string">"#+roam_tags: term\n"</span>
                                           <span class="org-string">"#+end_head\n"</span>)
                            <span class="org-builtin">:unnarrowed</span> t)
                   (<span class="org-string">"R"</span> <span class="org-string">"reference"</span>
                               plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
                               <span class="org-string">"#+roam_key: %^{SOURCE}\n#+end_head\n%?\n"</span>
                               <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
                               <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                              <span class="org-string">"#+begin_head\n"</span>
                                              <span class="org-string">"#+ghe_schema: "</span>
                                              <span class="org-string">""</span>
                                              <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                              <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                              <span class="org-string">"#+date: %U\n"</span>
                                              <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-</span>
<span class="org-string">                ${slug}\n"</span>
                                              <span class="org-string">"#+roam_tags: term\n"</span>)
                               <span class="org-builtin">:unnarrowed</span> t)
                (<span class="org-string">"p"</span> <span class="org-string">"person"</span>
                            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
                            <span class="org-string">"%?\n"</span>
                            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
                            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                           <span class="org-string">"#+begin_head\n"</span>
                                           <span class="org-string">"#+ghe_schema: "</span>
                                           <span class="org-string">"person-0.1.0"</span>
                                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+date: %U\n"</span>
                                           <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-${slug}\n"</span>
                                           <span class="org-string">"#+roam_tags: term\n"</span>
                                           <span class="org-string">"#+end_head\n"</span>)
                            <span class="org-builtin">:unnarrowed</span> t)
                (<span class="org-string">"T"</span> <span class="org-string">"Teraum"</span>)
                (<span class="org-string">"Tt"</span> <span class="org-string">"General entry"</span>
                            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
                            <span class="org-string">"%?"</span>
                            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
                            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+date: %U\n"</span>
                                           <span class="org-string">"#+roam_tags: Teraum"</span>)
                            <span class="org-builtin">:unnarrowed</span> t)
                (<span class="org-string">"Tp"</span> <span class="org-string">"Person"</span>
                            plain (<span class="org-keyword">function</span> org-roam--capture-get-point)
                            <span class="org-string">"%?\n\n- Species :: %^{SPECIES}\n- Age :: %^{AGE}\n- Pronouns :: %^{PRONOUNS|e/em/eir|she/her/hers|he/him/his|they/them/theirs}\n- Location :: %^{LOCATION}"</span>
                            <span class="org-builtin">:file-name</span> <span class="org-string">"%&lt;%Y%m%d%H%M%S&gt;-${slug}"</span>
                            <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                           <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                           <span class="org-string">"#+date: %U\n"</span>
                                           <span class="org-string">"#+roam_tags: Teraum\n\n"</span>)
                            <span class="org-builtin">:unnarrowed</span> t)))
        (<span class="org-keyword">setq</span> org-roam-dailies-capture-templates
              `(
                (<span class="org-string">"a"</span> <span class="org-string">"Activity entry"</span> entry
                                    #'org-roam-capture--get-point
                                    <span class="org-string">"* %U\n%?"</span>
                                    <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                                    <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                                   <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                                   <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                                   <span class="org-string">"#+date: %U\n"</span>
                                                   <span class="org-string">"#+export_file_name: ../../e/%&lt;%Y%m%d%H%M%S&gt;-${slug}\n"</span>
                                                   <span class="org-string">"#+roam_tags: daily-journal"</span>)
                <span class="org-builtin">:olp</span> (<span class="org-string">"Activity Log   :noexport:"</span>))
                (<span class="org-string">"j"</span> <span class="org-string">"Journal entry"</span> entry
                                    #'org-roam-capture--get-point
                                    <span class="org-string">"* %U\n%?"</span>
                                    <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                                    <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                                   <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                                   <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                                   <span class="org-string">"#+date: %U\n"</span>
                                                   <span class="org-string">"#+roam_tags: daily-journal"</span>)
                <span class="org-builtin">:olp</span> (<span class="org-string">"Journal   :noexport:"</span>))

                (<span class="org-string">"m"</span> <span class="org-string">"Discovered media"</span> entry
                 #'org-roam-capture--get-point
                 <span class="org-string">"* DISCOVERED %^{AUTHOR}: \"%^{TITLE}\"\n  :LOGBOOK:\n  - Note taken on %U \\\\\n  %?\n  :END:\n- Source: %^{SOURCE}\n"</span>
                 <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                 <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                <span class="org-string">"#+date: %U\n"</span>
                                <span class="org-string">"#+roam_tags: daily-journal"</span>)
                 <span class="org-builtin">:olp</span> (<span class="org-string">"Media Log   :noexport:"</span>))
                (<span class="org-string">"w"</span> <span class="org-string">"Weather observation"</span> entry
                                    #'org-roam-capture--get-point
                                    <span class="org-string">"* %U\n%?"</span>
                                    <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                                    <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                                   <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                                   <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                                   <span class="org-string">"#+date: %U\n"</span>
                                                   <span class="org-string">"#+roam_tags: daily-journal"</span>)
                                    <span class="org-builtin">:olp</span> (<span class="org-string">"Weather Log   :noexport:"</span>))
                (<span class="org-string">"t"</span> <span class="org-string">"thought"</span>)
                (<span class="org-string">"tp"</span> <span class="org-string">"private thought"</span> entry
                 #'org-roam-capture--get-point
                 <span class="org-string">"* %U\n%?"</span>
                 <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                 <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                <span class="org-string">"#+date: %U\n"</span>
                                <span class="org-string">"#+roam_tags: daily-journal"</span>)
                 <span class="org-builtin">:olp</span> (<span class="org-string">"Private thoughts   :noexport:"</span>))
                (<span class="org-string">"ts"</span> <span class="org-string">"private thought"</span> entry
                 #'org-roam-capture--get-point
                 <span class="org-string">"* %U\n%?"</span>
                 <span class="org-builtin">:file-name</span> <span class="org-string">"d/%&lt;%Y-%m-%d&gt;"</span>
                 <span class="org-builtin">:head</span> ,(concat <span class="org-string">"#+title: ${title}\n"</span>
                                <span class="org-string">"#+author: "</span> (user-full-name) <span class="org-string">"\n"</span>
                                <span class="org-string">"#+email: "</span> user-mail-address <span class="org-string">"\n"</span>
                                <span class="org-string">"#+date: %U\n"</span>
                                <span class="org-string">"#+roam_tags: daily-journal"</span>)
                 <span class="org-builtin">:olp</span> (<span class="org-string">"Shared thoughts"</span>))))
<span class="org-builtin">:hook</span> (after-init . org-roam-mode)
        <span class="org-builtin">:bind</span> (
               (<span class="org-string">"&lt;f5&gt;"</span> . org-roam-dailies-capture-today)
               (<span class="org-string">"&lt;f9&gt;"</span> . org-roam-dailies-find-today)
               (<span class="org-string">"C-c n l"</span> . org-roam)
               (<span class="org-string">"C-c n f"</span> . org-roam-find-file)
               (<span class="org-string">"C-c n g"</span> . org-roam-graph)
               ((<span class="org-string">"C-c n i"</span> . org-roam-insert)
               (<span class="org-string">"C-c n I"</span> . org-roam-insert-immediate))))

     (<span class="org-keyword">use-package</span> <span class="org-constant">org-roam-server</span> <span class="org-builtin">:straight</span> t)

</pre>
</div>
</div>
</div>
</div>
</section>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-12-18 Fri 14:06</p>
<p class="author">Author: emsenn</p>
<p class="date">Created: 2020-12-21 Mon 21:17</p>
</div>
</body>
</html>
