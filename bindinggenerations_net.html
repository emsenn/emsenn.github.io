<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-01-15 Fri 17:04 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>BindingGenerations.net</title>
<meta name="generator" content="Org mode">
<meta name="author" content="emsenn">
<style>
 	 @charset "UTF-8";
 	 
 	 :root {
 	     --body-font: sans-serif;
 	     --header-font: sans-serif;
 	     --code-font: monospace;
 	     --primary-color: #ffe;
 	     --primary-dim-color: #eed;
 	     --secondary-color: #312;
 	     --secondary-dim-color: #756;
 	     --link-color: #880;
 	     --link-hover-color: #aa2;
 	     --link-visited-color: #934;
 	     --link-visited-hover-color: #b56;
 	     --external-link-color: #008;
 	     --external-link-hover-color: #60b;
 	     --external-link-visited-color: #172;
 	     --external-link-visited-hover-color: #394;
 	 }
 	 @media(prefers-color-scheme:dark){
 	     :root {
 	 	--body-font: sans-serif;
 	 	--header-font: sans-serif;
 	 	--code-font: monospace;
 	 	--primary-color: #756;
 	 	--primary-dim-color: #312;
 	 	--secondary-color: #eed;
 	 	--secondary-dim-color: #ffe;
 	 	--link-color: #880;
 	 	--link-hover-color: #aa2;
 	 	--link-visited-color: #934;
 	 	--link-visited-hover-color: #b56;
 	     }}
 	 body {
 	     position: relative;
 	     min-height: 100%;
 	     background-color: var(--primary-color);
 	     color: var(--secondary-color);
 	     margin: 0 auto;
 	     font-family: sans-serif;
 	 }
 	 main, #content {
 	     background-color: var(--primary-dim-color);
 	     border-left: 1.5em dotted var(--primary-color);
 	     padding: 1em;
 	 }
 	 header {
 	     border-bottom: 0.8em dotted var(--secondary-dim-color);
 	 }
 	 h1 { font-size: 2em; margin-bottom: 0; }
 	 h2 {
 	     border-bottom: 0.3em dotted var(--secondary-dim-color);
 	 }
 	 h2, h3, h4, h5, h6, p, table, ul, ol, .org-src-container {
 	     width: 60%;
 	 }
 	 aside {
 	     float: right;
 	     width: 35%;
 	 }
 	 aside p { width: 100%; }
 	 @media screen and (max-width:760px) {
 	     h2, h3, h4, h5, h6, p, table, ul, ol, .org-src-container {
 	 	width: 90%;
 	     }
 	     aside {
 	 	float: inherit;
 	 	width: 90%;
 	 	border-top: 0.2em dotted var(--secondary-dim-color);
 	 	border-bottom: 0.2em dotted VAR(--secondary-dim-color);
 	 	font-size: 0.8em;
 	 	  }
 	 }
 	 
 	 footer, #postamble, #preamble {
 	     padding: 0.5em;
 	 }
 	 table {
 	     border-collapse: collapse;
 	     border-spacing: 0;
 	     empty-cells: show;
 	     border: 0.1em solid #444;
 	 }
 	 thead { font-family: sans-serif; }
 	 th, td {
 	     padding: 0 0.3em;
 	     border: 0.01em solid #444;
 	 }
 	 img {
 	     max-width: 80vw;
 	     vertical-align: middle;
 	 }
 	 pre, .src {
 	     padding: 0.5em;
 	     border: 0.1em solid #444;
 	     white-space: pre-wrap;
 	     overflow-x: scroll;
 	     text-overflow: clip;
 	     scrollbar-width: none;
 	 }
 	 pre::-webkit-scrollbar, .src::-webkit-scrollbar {
 	     display: none;
 	 }
 	 
 	 
 	 dt {
 	     font-weight: normal;
 	     display: inline-block;
 	     border-bottom: 0.1rem dotted #444;
 	 }
 	 #text-index dt { border-bottom: none; }
 	 h2, h3, h4, h5, h6, h7, h8, h9, h10 {
 	     display: block;
 	     font-family: sans-serif;
 	     margin: 0.2em auto 0.5em 0;
 	 }
 	 a, .link {
 	     text-decoration: none;
 	     color: #880;
 	     display: inline;
 	     position: relative;
 	     border-bottom: 0.1rem dotted;
 	     line-height: 1.2;
 	     transition: border 0.3s;
 	 }
 	 a:hover {
 	     color: #aa2;
 	     outline-style: none;
 	     border-bottom: 0.1rem solid;
 	 }
 	 a:visited, .visited-link { color: #934; }
 	 a:visited:hover { color: #b56; }
 	 a:focus {
 	     outline-style: none;
 	     border-bottom: 0.1rem solid;
 	 }
 	 ::selection { background-color: #777; color: #eee; }
 	 a::selection { background-color: #ccc; }
 	 .org-todo {
 	     background-color: #ddd;
 	     color: #333;
 	     font-size: .8rem;
 	     float: right;
 	 }
 	 .org-src-container + .example {
 	     margin-left: 8em;
 	 }
 	 a[href^="https://"]:not([href*="emsenn.net"]):after, a[href^="https://"]:not([href*="emsenn.net"]):visited:after, .external-link:after, .visited-external-link:after { 
 	     content: "^";
 	     font-size: 0.5em;
 	     vertical-align: super;
 	 }
 	 a[href^="https://"]:not([href*="emsenn.net"]), .external-link {
 	     color: var(--external-link-color);
 	 }
 	 a[href^="https://"]:not([href*="emsenn.net"]):hover{ 
 	     color: var(--external-link-hover-color);
 	 }
 	 a[href^="https://"]:not([href*="emsenn.net"]):visited, .visited-external-link { 
 	     color: var(--external-link-visited-color);
 	 }
 	 a[href^="https://"]:not([href*="emsenn.net"]):visited:hover{ 
 	     color: var(--external-link-visited-hover-color);
 	 }
 	 blockquote {
 	     border: 0.1em dashed var(--secondary-dim-color);
 	     padding-left: 0.2em;
 	 }
 	 label.org-src-name {
 	     margin: 0 0 0 3em;
 	     font-family: sans-serif;
 	     font-size: 1rem;
 	     line-height: 0;
 	 }
 	 .skip-to-content {
 	     opacity: 0;
 	     position: absolute;
 	     left: 0.2em;
 	 }
 	 .skip-to-content:focus{
 	     opacity: 1;
 	     background-color: var(--secondary-dim-color);
 	     color: var(--primary-color);
 	 }
 	 ul { max-width: 85%; }
 </style>
</head>
<body>
<section id="preamble" class="status">
<a href="#content" class="skip-to-content">skip to content</a><section class="nav"><strong>Website navigation:</strong> <a href="./index.html">homepage</a> | <a href="./d/index.html">daily records</a> | <a href="./concepts_index.html">concepts</a><p>This Website was cultivated as a public asset with <a href="https://ko-fi.com/emsenn">support</a> from people like you. <strong><em>Thank you!</em></strong></p><details><summary>Click this sentence for information about this Website.</summary><p>Click each sentence below for more information about each topic.</p><ul><li><details><summary>This Website is a collection of records linked through their relationship to each other.</summary><p>Each page on this Website is <em>record</em> of <em>information</em>. (There are <a href="./record.html">records</a> with more <a href="./information.html">information</a> about both of those concepts.) On the <a href="./Web.html">Web</a>, these records are <a href="hypertext">hypertext</a>: they contain links to each other (and other resources). The table below demonstrates link styling.<table><thead><tr><th scope="col">Color</th><th scope="col">Link type</th></tr></thead><tbody><tr><td class="link">Sample</td><td>Unvisited local resource</td></tr><tr><td class="visited-link">Sample</td><td>Visited local resource</td></tr><tr><td class="external-link">Sample</td><td>Unvisited external resource</td></tr><tr><td class="visited-external-link">Sample</td><td>Visited external resource</td></tr></table></details></li><li><details><summary>It was created by one human person wishing to communicate with others.</summary><p>It was created by me, <a href="./emsenn.html">emsenn</a>, to share some of my <a href="./knowledge.html">knowledge</a> with <a href="./person.html">people</a> on the <a href="Web.html">Web</a>.</p></details></li><li><details><summary>Each Webpage contains a <em>record</em> of <em>information</em>.</summary><p>Each Webpage on my Website is a <a href="./record.html">record</a> of <a  href="information.html">information</a>. These records have different components, depending on what type they are, but here's some common components:<dl><dt>Introduction</dt><dd>A record's <em>introduction</em> describes the record, including what <a href="./permission.html">permissions</a> are granted.</dd><dt>Backlinks</dt><dd>A record's <a href="./backlink.html">backlinks</a> shows which other records link to this one.</dd></dl></details></li></ul></section>
</section>
<main id="content">
<header>
<h1 class="title">BindingGenerations.net</h1>
</header><p>
<b><i>BindingGenerations.net</i></b> is the personal website of <a href=esther_davis.html>Esther Davis</a>. This file is my notes on building up that <a href=website.html>Website</a>.
</p>
<section id="outline-container-orgd58ef3a" class="outline-2">
<h2 id="orgd58ef3a">Getting Started</h2>
<div class="outline-text-2" id="text-orgd58ef3a">
<p>
Before creating this <a href=note.html>note</a>, I have already made a few decisions about how the Website should work, that I discussed with Esther. They're trusting me that they'll be a fan of the <a href=zettelkasten_method.html>Zettelkasten method</a> of <a href=note_taking.html>note-taking</a>, and because of other decisions made in relationship to the <a href=webgaz.html>WebGAZ</a>, <a href=org-roam.html>Org-roam</a> seems like the best way of creating those notes. (The fact its built on-top of <a href=org_mode.html>Org-mode</a> and so its notes will be suitable for independent export as <a href=pdf.html>PDFs</a> is a nice bonus, but honestly unrelated to the choice to use Org-roam.
</p>

<p>
I've been using Org-roam myself since yesterday, and so my first task is to configure some sort of&#x2026; not-my-own <a href=org_roam_directory.html>Org-roam directory</a>, so that I can separate the notes for BN.net from my notes. <a href="https://www.orgroam.com/manual.html#How-do-I-have-more-than-one-Org_002droam-directory_003f">Section 21.1</a> of the Org-roam manual seems to have the answer, but not enough context for me to know for sure: I'm not sure if I understand how <a href=emacs.html>Emacs</a> handles "directory-local variables," as that section calls it.
</p>

<p>
The relevant section of the manual, <a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html">49.2.5</a>, gives the context to make it clear: I want to put the following lines in <code>~/org/edavis/roam/.dir-locals.el</code>, where I'll be keeping the source data for BN.net.
</p>

<div class="org-src-container">
<pre class="src src-elisp">((nil . ((org-roam-directory . ".")
       (org-roam-db-location . "./org-roam.db"))))
</pre>
</div>

<p>
With that directory in place, I can start to capture Org-roam notes while in that directory. I seeded it with one for Esther Davis, to kick things off, and now I want to set up an <a href=org_publish.html>Org-publish</a> project for rendering out those notes as a Website.
</p>

<p>
Yesterday I found <a href="https://commonplace.doubleloop.net/20200821142536-how_i_publish_my_wiki_with_org_publish">"How I publish my wiki with org-publish"</a> on the <a href=commonplace_wiki.html>Commonplace wiki</a>, and it's probably a good resource for getting a publishing process set up myself. (I looked for how <a href=jethro_kuan.html>Jethro Kuan</a> publishes their <a href="https://braindump.jethro.dev/">braindump</a> but didn't find it.)
</p>

<p>
It's actually Doubleloop's <a href="https://gitlab.com/ngm/commonplace/-/blob/master/publish.el"><code>publish.el</code></a> that I want to look at, apparently.
</p>

<p>
Let's start with a simple projects list and see how that looks, exported:
</p>

<div class="org-src-container">
<pre class="src src-elisp">(setq org-publish-project-alist
      `(("bindinggenerations"
	 :base-directory "~/org/edavis/roam"
	 :base-extension "org"
	 :publishing-directory "~/org/edavis/public"
	 :publishing-function org-html-publish-to-html
	 :recursive t
	 :headline-levels 4
	 :with-toc nil
	 :html-doctype "html5"
	 :html-html5-fancy t
	 :html-head-include-scripts nil
	 :html-head-include-default-style nil
	 :html-container "section"
	 :htmlized-source nil
	 :auto-sitemap t
	 :sitemap-title "Notes"
	 :sitemap-sort-files anti-chronologically
	 :sitemap-filename "notes.org")))
</pre>
</div>

<p>
That definitely works - I end up with a <code>posts.html</code> and a <code>20...-esther_davis.html</code>. Two things I see I need to change: it uses me as the author, and I need some sort of index page.
</p>

<p>
I think I can accomplish the former by tweaking <code>.dir-locals.el</code>
</p>

<div class="org-src-container">
<pre class="src src-elisp">((nil . ((org-roam-directory . ".")
	 (org-roam-db-location . "./org-roam.db")
	 (user-full-name "Esther Davis"))))
</pre>
</div>

<p>
Dang, nope! That's not too important though - we want to have the author hard-coded into the note file, which means tweaking our capture templates. First, to address the second of the issues above, I want to try manually adding an <code>index.org</code> to <code>~/org/edavis/roam.org</code> and see what that gets us, in Org-roam and the Website.
</p>


<p>
That worked, okay. Tabling the "wrong author" problem for now, since it'll get resolved by the next step: setting up <a href=org_roam_capture_template.html>Org-roam capture templates</a>.
</p>

<p>
<a href="https://www.orgroam.com/manual.html#The-Templating-System">Section 7</a> of the Org-roam manual talks about its extension/hijacking of <a href=org_mode_capture_template.html>Org-mode capture template</a>.
</p>

<div class="org-src-container">
<pre class="src src-elisp">(setq org-roam-capture-templates
      `(("b" "Binding Generations records")
	("bn" "General note"
	 plain (function org-roam--capture-get-point)
	 "%?"
	 :file-name "%&lt;%Y%m%d%H%M%S&gt;-${slug}"
	 :head "#+title: ${title}\n#+author: Esther Davis\n#+email: edavis@bindinggenerations.net\n"
	 :unnarrowed t)
	("bb" "Bibliographical entry"
	 plain (function org-roam--capture-get-point)
	 "#+title: %^{AUTHOR}: \"%^{TITLE}\"\n#+author: Esther Davis\n#+email: edavis@bindinggenerations.net\n%?"
	 :file-name "%&lt;%Y%m%d%H%M%S&gt;-%{slug}"
	 :unnarrowed t)))
</pre>
</div>

<p>
The above all seems to work, and the only thing I really need these pages to have right now is a listing of backlinks on each note, which might be easy to extract from Doubleloop's <code>publish.el</code>
</p>

<div class="org-src-container">
<pre class="src src-elisp">(defun commonplace/org-roam--backlinks-list (file)
  (if (org-roam--org-roam-file-p file)
      (--reduce-from
       (concat acc (format "- [[file:%s][%s]]\n"
			   (file-relative-name (car it) org-roam-directory)
			   (org-roam-db--get-title (car it))))
       "" (org-roam-db-query [:select [source] :from links :where (= dest $s1)] file))
    ""))

(defun commonplace/org-export-preprocessor (backend)
  (let ((links (commonplace/org-roam--backlinks-list (buffer-file-name))))
    (unless (string= links "")
      (save-excursion
	(goto-char (point-max))
	(insert (concat "\n* Backlinks\n") links)))))

(add-hook 'org-export-before-processing-hook 'commonplace/org-export-preprocessor)
</pre>
</div>

<p>
That actually seems to have worked to do exactly what I wanted it to do, and so now the big challenge will be figuring out the specific schema for notes, tweaking capture templates, and the rendering of HTML and its CSS.
</p>

<p>
But before I can really get further in those problems, I need to figure out how to not get my notes so messy, and so that I don't end up losing useful code snippets here in the notes, or, worse, have useful code that contradicts itself being extracted and applied out of them!
</p>
</div>


<div id="outline-container-backlinks" class="outline-3">
<h3 id="backlinks">Backlinks</h3>
<div class="outline-text-3" id="text-backlinks">
<ul class="org-ul">
<li><a href=d/2020-12-17.html>2020-12-17</a></li>
<li><a href=d/2020-12-17.html>2020-12-17</a></li>
<li><a href=records_index.html>Records Index</a></li>
</ul>
</div>
</div>
</section>
</main>
<section id="postamble" class="status">
<p class="author">Author: emsenn</p>
<p class="date">Created: 2021-01-15 Fri 17:04</p>
</section>
</body>
</html>
